---
title: "HTTP 상태 코드"
categories:
- HTTP
date: 2023-04-12
toc: true
toc_label: CATEGORY
toc_sticky: true
tags: [HTTP]
---


인프런 **[모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)** 강의를 듣고 정리한 포스팅입니다.
{: .notice--info}



# 상태 코드는?

클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능

- 1xx(Infromational): 요청이 수신되어 처리중 - 거의 사용안함
- 2xx(Successful): 요청 정상 처리
- 3xx(Redirection): 요청을 완료하려면 추가 행동 필요
- 4xx(Client Error): 클라이언트 오류, 잘못된 문법등으로 서버가 요청을 수행할 수 없음
- 5xx(Server Error): 서버 오류, 서버가 정상 요청을 처리하지 못함

### 만약 클라이언트가 모르는 상태 코드가 나타나면?

클라이언트는 상위 상태코드로 인식한다

모르는 상태 코드 299 → 클라이언트) 모르는 상태코드이지만 200번대니까 요청이 정상 처리됐다는 뜻이구나!

모르는 상태 코드 451 → 클라이언트) 모르는 상태코드이지만 400번대니까 요청이 잘못됐다는 뜻이구나!

## 2xx - 성공

### **200  OK - 요청 성공**

GET이나 다른 요청에 성공했을 때 상태 코드이다.

```sql
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 34
{
	"username": "young",
	"age": 20
}
```

### **201 Created - 요청에 성공하여 새로운 리소스가 생성됨**

POST요청으로 새로운 리소스가 생성되었을 때 상태코드로 생성된 리소스는 Location 헤더 필드로 식별한다.

```sql
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 34
Location: /members/100
{
	"username": "young",
	"age": 20
}
```

### **202 Accepted - 요청이 접수되었으나 처리가 완료되지 않았음**

배치 처리 같은 곳에서 사용

ex) 요청 접수 후 1시간 뒤에 배치 프로세스가 요청을 처리함

ex) 병원에서 접수 후 진료까지 대가하는 상태?

### **204 No Content**

서버가 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없을 때

- ex) 문서 편집기에서 save버튼
- save버튼의 결과는 아무 내용이 없어도 된다.
- 결과가 없어도 204 상태 코드로 성공을 인식할 수 있다.

## 3xx  - 리다이렉션

웹 브라우저는 3xx 응답의 결과에 Location 헤더가 있으면, Location 위치로 **자동 이동**한다.

### **영구 리다이렉션 - 특정 리소스의 URI가 영구적으로 이동**

원래의 URL 사용 못함. 검색 엔진 등에서도 변경 인지

### **301 Moved Permanently**

- 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음.
- ex) POST로 요청해도 GET으로 변경되고 body내용이 제거될 수 있음

**HTTP 요청 메시지**

```sql
POST /event HTTP/1.1
Host: localhost:8080

name=hello&age=20
```

**********************HTTP 응답 메시지**********************

```sql
HTTP /1.1 301 Moved Permanently
Location: /new-event
```

**리다이렉트된** **HTTP 요청 메시지**

```sql
GET /new-event HTTP/1.1
Host: localhost:8080
// 메소드 변경, body 삭제
```

### **308 Permanent Redirect**

- 301과 기능이 같다.
- 리다이렉트시 요청 메서드와 본문이 유지된다.  (POST 메서드와 body를 그대로 전달)

**URL이 바뀌면 전달하는 데이터도 모두 바뀌기 때문에 301사용 권장한다.**

## **일시적 리다이렉션 - 특정 리소소의 URI가 일시적인 변경**

리소스의 URL을 일시적으로 변경하는 것이기 때문에 검색 엔진 등에서 URL을 변경하면 안된다.

### 302 Found

- 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음

### 307 Temporary Redirect

- 302와 기능은 같음
- 리다이렉트시 요청 **메서드와 본문 유지**

### 303 See Other

- 302와 기능은 같음
- 리다이렉트시 요청 메서드가 GET으로 **무조건 변경**

**모호한 302에서 명확한 307(메서드, 본문 유지), 303(무조건 변경)기능이 추가되었다.** 

**303과 307을 권장하지만 이미 많은 웹에서 302를 사용했기 때문에 GET으로 변경할 시 302를 사용해도 된다.**

### PRG: Post/Redirect/Get

- 일시적 리다이렉션의 대표적인 예시
- POST로 주문 후 주문 결과 화면을 GET 메서드로 리다이렉트하면 새로고침해도 결과화면으로 GET을 조회하기 때문에 중복 주문을 방지할 수 있다.

POST로 주문후에 웹 브라우저를 새로고침할 때를 예를 들었다.

**POST 주문 요청과 응답**

```sql
POST /order HTTP/1.1
Host: localhost:8080

itemld=mouse&count=1
```

```sql
HTTP/1.1 200 OK

<html>주문완료</html>
```

**주문완료상태에서 새로고침**

```sql
POST /order HTTP/1.1
...
```

POST 메서드가 반복호출되어 중복주문이 된다. 

중복주문을 방지하고자 PRG를 사용해야 한다.

**PRG사용한 주문 요청과 응답**

```sql
POST /order HTTP/1.1
Host: localhost:8080

itemld=mouse&count=1
```

```sql
HTTP/1.1 302 Found
Location: /order-result/19
```

3xx번대를 받은 클라이언트는 응답 메시지의 Location 헤더의 주소로 자동 이동된다.

```sql
GET /order-result/19 HTTP/1.1
Host: localhost:8080
```

이후 새로고침해도 GET 메시지를 받아 결과페이지만 나올 뿐 중복 주문은 되지 않는다.

## **특수 리다이렉션**

### 304 Not Modified

- 캐시를 목적으로 사용
- 클라이언트에게 리소스가 수정되지 않았음을 알려준다. 따라서 클라이언트는 로컬PC에 저장된 캐시를 재사용한다.(캐시로 리다이렉트)
- 304응답은 body를 포함하면 안된다.(로컬 캐시를 사용해야 하기때문에~)

## 4xx - 클라이언트 오류

- 클라이언트의 요청에 잘못된 문법등으로 서버가 요청을 수행할 수 없음
- 오류의 원인이 클라이언트에 있음
- 요청이 잘못되었기 때문에 똑같은 재시도가 실패함.

### 400 Bad Request

클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없음

ex) 요청 파라미터가 잘못되거나, API 스펙이 맞지 않을 때

### 401 Unauthorized

클라이언트가 해당 리소스에 대한 인증이 필요함

- 인증(Authentication)이 되지 않았음
- 401 오류 발생시 응답에 WWW-Authenticate 헤더와 함께 인증 방법을 설명함

**인증과 인가**

- 인증(Authentication): 본인이 누구인지 확인(로그인)
- 인가(Authorization): 어드민권한처럼 특정 리소스에 접근할 수 있는 권한, 인증이 있어야 인가가 있다.

### 403 Forbidden

서버가 요청을 이해했지만 승인을 거부함

- 주로 인증 자격 증명은 있지만, 접근 권한이 불충분한 경우
- 로그인한 일반 유저가 어드민 등급의 리소스에 접근하는 경우

### 404 Not Found

요청 리소스를 찾을 수 없음

- 요청 리소스가 서버에 없을 때 ex) URI를 잘못 쳤을 떄
- 일반 유저가 어드민 등급의 리소스에 접근했을 때 리소스 자체를 완전히 숨기고 싶을 떄 403대신 404를 사용

## 5xx - 서버 오류

서버 문제로 오류

- 서버에 문제가 있기 때문에 재시도 하면 성공할 수도 있음
- 정말 서버에 문제가 발생했을 때만 사용하는 상태코드

### 500 Internal Server Error

서버 문제로 오류 발생, **애매하면 500 어류**

### 503 Service Unavailable

서비스 이용 불가

- 서버가 일시적인 과부하 또는 예정된 작업(업데이트)로 잠시 요청을 처리할 수 없을 때
- Retry-After 헤더 필드로 얼마뒤 복구되는지 보낼 수 있음

### 모든 상태 코드를 사용해야 할까?

상태 코드는 위에 나열된 것말고도 너무 많기 때문에 다 사용하려면 클라이언트에서 처리하기도 힘들다.

팀에서 어디까지 사용할지 정한 다음 사용하자! ex) 200번대에서는 200번만 사용한다는지..